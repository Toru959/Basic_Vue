{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport HeaderList from '@/global/HeaderList.vue';\nimport FooterList from '@/global/FooterList.vue';\nconst STORAGE_KEY = 'books';\nexport default {\n  name: 'App',\n  components: {\n    HeaderList,\n    FooterList\n  },\n  data: function () {\n    return {\n      books: [],\n      newBook: null\n    };\n  },\n  mounted() {\n    if (localStorage.getItem(STORAGE_KEY)) {\n      try {\n        this.books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n      } catch (e) {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n  },\n  methods: {\n    addBooks(e) {\n      this.books.push({\n        id: this.books.length,\n        title: e.title,\n        image: e.image,\n        description: e.description,\n        readDate: '',\n        memo: ''\n      });\n      this.saveBooks();\n      // console.log(this.books.slice(-1)[0].id) 最後に追加した本のidを取得\n      this.goToEditPage(this.books.slice(-1)[0].id);\n    },\n    removeBooks(n) {\n      this.books.splice(n, 1);\n      this.saveBooks();\n    },\n    saveBooks() {\n      const parsed = JSON.stringify(this.books);\n      localStorage.setItem(STORAGE_KEY, parsed);\n    },\n    updateBookInfo(e) {\n      const updateInfo = {\n        id: e.id,\n        readDate: e.readDate,\n        memo: e.memo,\n        title: this.books[e.id].title,\n        image: this.books[e.id].image,\n        description: this.books[e.id].description\n      };\n      this.books.splice(e.id, 1, updateInfo);\n      this.saveBooks();\n      This.$router.push('/');\n    },\n    goToEditPage(id) {\n      this.$router.push(`/edit/${id}`);\n    },\n    deleteLocalStorage() {\n      const isDeleted = 'LocalStorageのデータを削除していいですか?';\n      if (window.confirm(isDeleted)) {\n        localStorage.setItem(STORAGE_KEY, '');\n        localStorage.removeItem(STORAGE_KEY);\n        this.books = [];\n        window.location.reload();\n      }\n    }\n  }\n};","map":{"version":3,"names":["HeaderList","FooterList","STORAGE_KEY","name","components","data","books","newBook","mounted","localStorage","getItem","JSON","parse","e","removeItem","methods","addBooks","push","id","length","title","image","description","readDate","memo","saveBooks","goToEditPage","slice","removeBooks","n","splice","parsed","stringify","setItem","updateBookInfo","updateInfo","This","$router","deleteLocalStorage","isDeleted","window","confirm","location","reload"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <v-app>\n    <HeaderList @delete-local-storage=\"deleteLocalStorage\" />\n    <v-main>\n      <v-container>\n        <router-view @add-book-list=\"addBook\" :books=\"books\" \n        @update-book-info=\"updateBookInfo\" />\n      </v-container>\n    </v-main>\n    <FooterList/>\n  </v-app>\n</template>\n\n<script>\nimport HeaderList from '@/global/HeaderList.vue';\nimport FooterList from '@/global/FooterList.vue'\nconst STORAGE_KEY = 'books'\n\nexport default {\n  name: 'App',\n\n  components: {\n    HeaderList,\n    FooterList\n  },\n\n  data: function(){\n    return {\n      books: [],\n      newBook: null,\n    }\n  },\n  mounted() {\n    if (localStorage.getItem(STORAGE_KEY)) {\n    try {\n        this.books = JSON.parse(localStorage.getItem(STORAGE_KEY))\n    } catch(e) {\n        localStorage.removeItem(STORAGE_KEY)\n    }\n    }\n  },\n  methods: {\n    addBooks(e) {\n  \n    this.books.push({\n      id: this.books.length,\n      title: e.title,\n      image: e.image,\n      description: e.description,\n      readDate: '',\n      memo: ''\n    });\n    this.saveBooks()\n    // console.log(this.books.slice(-1)[0].id) 最後に追加した本のidを取得\n    this.goToEditPage(this.books.slice(-1)[0].id)\n    },\n    removeBooks(n) {\n    this.books.splice(n, 1)\n    this.saveBooks()\n    },\n    saveBooks() {\n    const parsed = JSON.stringify(this.books)\n    localStorage.setItem(STORAGE_KEY, parsed)\n    },\n    updateBookInfo(e){\n      const updateInfo = {\n        id: e.id,\n        readDate: e.readDate,\n        memo: e.memo,\n        title: this.books[e.id].title,\n        image: this.books[e.id].image,\n        description: this.books[e.id].description\n      }\n\n      this.books.splice(e.id, 1, updateInfo)\n      this.saveBooks()\n      This.$router.push('/')\n    },\n    goToEditPage(id){\n      this.$router.push(`/edit/${id}`)\n    },\n    deleteLocalStorage(){\n      const isDeleted = 'LocalStorageのデータを削除していいですか?'\n      if(window.confirm(isDeleted)){\n        localStorage.setItem(STORAGE_KEY, '')\n        localStorage.removeItem(STORAGE_KEY)\n        this.books = []\n        window.location.reload()\n      }\n    }\n  }\n  \n};\n</script>\n"],"mappings":";AAcA,OAAAA,UAAA;AACA,OAAAC,UAAA;AACA,MAAAC,WAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAJ,UAAA;IACAC;EACA;EAEAI,IAAA,WAAAA,CAAA;IACA;MACAC,KAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,IAAAC,YAAA,CAAAC,OAAA,CAAAR,WAAA;MACA;QACA,KAAAI,KAAA,GAAAK,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,CAAAR,WAAA;MACA,SAAAW,CAAA;QACAJ,YAAA,CAAAK,UAAA,CAAAZ,WAAA;MACA;IACA;EACA;EACAa,OAAA;IACAC,SAAAH,CAAA;MAEA,KAAAP,KAAA,CAAAW,IAAA;QACAC,EAAA,OAAAZ,KAAA,CAAAa,MAAA;QACAC,KAAA,EAAAP,CAAA,CAAAO,KAAA;QACAC,KAAA,EAAAR,CAAA,CAAAQ,KAAA;QACAC,WAAA,EAAAT,CAAA,CAAAS,WAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACA,KAAAC,SAAA;MACA;MACA,KAAAC,YAAA,MAAApB,KAAA,CAAAqB,KAAA,QAAAT,EAAA;IACA;IACAU,YAAAC,CAAA;MACA,KAAAvB,KAAA,CAAAwB,MAAA,CAAAD,CAAA;MACA,KAAAJ,SAAA;IACA;IACAA,UAAA;MACA,MAAAM,MAAA,GAAApB,IAAA,CAAAqB,SAAA,MAAA1B,KAAA;MACAG,YAAA,CAAAwB,OAAA,CAAA/B,WAAA,EAAA6B,MAAA;IACA;IACAG,eAAArB,CAAA;MACA,MAAAsB,UAAA;QACAjB,EAAA,EAAAL,CAAA,CAAAK,EAAA;QACAK,QAAA,EAAAV,CAAA,CAAAU,QAAA;QACAC,IAAA,EAAAX,CAAA,CAAAW,IAAA;QACAJ,KAAA,OAAAd,KAAA,CAAAO,CAAA,CAAAK,EAAA,EAAAE,KAAA;QACAC,KAAA,OAAAf,KAAA,CAAAO,CAAA,CAAAK,EAAA,EAAAG,KAAA;QACAC,WAAA,OAAAhB,KAAA,CAAAO,CAAA,CAAAK,EAAA,EAAAI;MACA;MAEA,KAAAhB,KAAA,CAAAwB,MAAA,CAAAjB,CAAA,CAAAK,EAAA,KAAAiB,UAAA;MACA,KAAAV,SAAA;MACAW,IAAA,CAAAC,OAAA,CAAApB,IAAA;IACA;IACAS,aAAAR,EAAA;MACA,KAAAmB,OAAA,CAAApB,IAAA,UAAAC,EAAA;IACA;IACAoB,mBAAA;MACA,MAAAC,SAAA;MACA,IAAAC,MAAA,CAAAC,OAAA,CAAAF,SAAA;QACA9B,YAAA,CAAAwB,OAAA,CAAA/B,WAAA;QACAO,YAAA,CAAAK,UAAA,CAAAZ,WAAA;QACA,KAAAI,KAAA;QACAkC,MAAA,CAAAE,QAAA,CAAAC,MAAA;MACA;IACA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}